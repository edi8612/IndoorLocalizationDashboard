@{
    ViewData["Title"] = "Student Table";
}

<div class="card mb-4">
    <div class="card-header">
        <i class="fas fa-table me-1"></i>
        Student Table
    </div>
    <div class="card-body">
        <table id="studentsTable" class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Classroom</th>
                    <th>Attended</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
    fetch("/api/student")
        .then(res => res.json())
        .then(data => {
            const tbody = document.querySelector("#studentsTable tbody");
            data.forEach(s => {
                const row = `
                    <tr>
                        <td>${s.id}</td>
                        <td>${s.name}</td>
                        <td>${s.classroom?.name ?? ""}</td>
                        <td>${s.attended ? "Yes" : "No"}</td>
                    </tr>`;
                tbody.innerHTML += row;
            });

            // Re-initialize the DataTable
            new simpleDatatables.DataTable("#studentsTable");
        })
        .catch(error => console.error("Error loading students:", error));
</script>
